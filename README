//Package UnThermo
//after unfinnigan http://code.google.com/p/unfinnigan/wiki/FileLayoutOverview

//example use case:
package main

import (
	"flag"
	"fmt"
	"bitbucket.org/proteinspector/unthermo"
)

func main() {
	flag.Parse() // Scans the arg list and sets up flags.

	for _, filename := range flag.Args() {
		hdr:=new(unthermo.FileHeader)
		pos := unthermo.ReadFile(filename, 0, 0, hdr)
		
		fmt.Println("v", hdr.Version)
		
		pos = unthermo.ReadFile(filename, pos, hdr.Version,new(unthermo.SequencerRow))
		pos = unthermo.ReadFile(filename, pos, 0, new(unthermo.AutoSamplerInfo))

		info:=new(unthermo.Info)
		pos = unthermo.ReadFile(filename, pos, hdr.Version,info)
		fmt.Println(info.Preamble.Runheader_addr32)
		
		rh:=new(unthermo.RunHeader)
		pos= unthermo.ReadFile(filename,int64(info.Preamble.Runheader_addr32),hdr.Version,rh)
		fmt.Println(rh.SampleInfo.ScanIndexAddress, rh.Scantrailer_addr32)
	}
}
